{"version":3,"file":"react-katex.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { ComponentPropsWithoutRef, useState, useEffect } from 'react';\nimport KaTeX, { ParseError } from 'katex';\n\nconst TeX: React.FC<TeXProps> = ({\n  children,\n  math,\n  block,\n  errorColor,\n  renderError,\n  settings,\n  ...props\n}) => {\n  const Component = block ? 'div' : 'span';\n  const content = (children ?? math) as string;\n  const [state, setState] = useState<\n    { innerHtml: string } | { errorElement: React.ReactElement }\n  >({ innerHtml: '' });\n\n  useEffect(() => {\n    try {\n      const innerHtml = KaTeX.renderToString(content, {\n        displayMode: !!block,\n        errorColor,\n        throwOnError: !!renderError,\n        ...settings,\n      });\n\n      setState({ innerHtml });\n    } catch (error) {\n      if (error instanceof KaTeX.ParseError || error instanceof TypeError) {\n        if (renderError) {\n          setState({ errorElement: renderError(error) });\n        } else {\n          setState({ innerHtml: error.message });\n        }\n      } else {\n        throw error;\n      }\n    }\n  }, [block, content, errorColor, renderError, settings]);\n\n  if ('errorElement' in state) {\n    return state.errorElement;\n  }\n\n  return (\n    <Component\n      {...props}\n      dangerouslySetInnerHTML={{ __html: state.innerHtml }}\n    />\n  );\n};\n\nexport default TeX;\n\ntype TeXProps = ComponentPropsWithoutRef<'div'> &\n  Partial<{\n    math: string | number;\n    block: boolean;\n    errorColor: string;\n    renderError: (error: ParseError | TypeError) => React.ReactElement;\n    settings: KaTeX.KatexOptions;\n  }>;\n"],"names":["children","math","block","errorColor","renderError","settings","props","Component","content","useState","innerHtml","state","setState","useEffect","KaTeX","renderToString","displayMode","throwOnError","error","ParseError","TypeError","errorElement","message","React","dangerouslySetInnerHTML","__html"],"mappings":"wVAGgC,gBAC9BA,IAAAA,SACAC,IAAAA,KACAC,IAAAA,MACAC,IAAAA,WACAC,IAAAA,YACAC,IAAAA,SACGC,0MAEGC,EAAYL,EAAQ,MAAQ,OAC5BM,QAAWR,EAAAA,EAAYC,IACHQ,WAExB,CAAEC,UAAW,KAFRC,OAAOC,OA2Bd,OAvBAC,YAAU,WACR,IACE,IAAMH,EAAYI,EAAMC,eAAeP,KACrCQ,cAAed,EACfC,WAAAA,EACAc,eAAgBb,GACbC,IAGLO,EAAS,CAAEF,UAAAA,IACX,MAAOQ,GACP,KAAIA,aAAiBJ,EAAMK,YAAcD,aAAiBE,WAOxD,MAAMF,EALJN,EADER,EACO,CAAEiB,aAAcjB,EAAYc,IAE5B,CAAER,UAAWQ,EAAMI,YAMjC,CAACpB,EAAOM,EAASL,EAAYC,EAAaC,IAEzC,iBAAkBM,EACbA,EAAMU,aAIbE,gBAAChB,mBACKD,GACJkB,wBAAyB,CAAEC,OAAQd,EAAMD"}