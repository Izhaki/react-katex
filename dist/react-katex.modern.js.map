{"version":3,"file":"react-katex.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { ComponentPropsWithoutRef, useState, useEffect } from 'react';\nimport KaTeX, { ParseError } from 'katex';\n\nconst TeX: React.FC<TeXProps> = ({\n  children,\n  math,\n  block,\n  errorColor,\n  renderError,\n  settings,\n  ...props\n}) => {\n  const Component = block ? 'div' : 'span';\n  const content = (children ?? math) as string;\n  const [state, setState] = useState<\n    { innerHtml: string } | { errorElement: React.ReactElement }\n  >({ innerHtml: '' });\n\n  useEffect(() => {\n    try {\n      const innerHtml = KaTeX.renderToString(content, {\n        displayMode: !!block,\n        errorColor,\n        throwOnError: !!renderError,\n        ...settings,\n      });\n\n      setState({ innerHtml });\n    } catch (error) {\n      if (error instanceof KaTeX.ParseError || error instanceof TypeError) {\n        if (renderError) {\n          setState({ errorElement: renderError(error) });\n        } else {\n          setState({ innerHtml: error.message });\n        }\n      } else {\n        throw error;\n      }\n    }\n  }, [block, content, errorColor, renderError, settings]);\n\n  if ('errorElement' in state) {\n    return state.errorElement;\n  }\n\n  return (\n    <Component\n      {...props}\n      dangerouslySetInnerHTML={{ __html: state.innerHtml }}\n    />\n  );\n};\n\nexport default TeX;\n\ntype TeXProps = ComponentPropsWithoutRef<'div'> &\n  Partial<{\n    math: string | number;\n    block: boolean;\n    errorColor: string;\n    renderError: (error: ParseError | TypeError) => React.ReactElement;\n    settings: KaTeX.KatexOptions;\n  }>;\n"],"names":["children","math","block","errorColor","renderError","settings","props","Component","content","state","setState","useState","innerHtml","useEffect","KaTeX","renderToString","displayMode","throwOnError","error","ParseError","TypeError","errorElement","message","React","dangerouslySetInnerHTML","__html"],"mappings":"sFAGgC,EAC9BA,SAAAA,EACAC,KAAAA,EACAC,MAAAA,EACAC,WAAAA,EACAC,YAAAA,EACAC,SAAAA,KACGC,MAEH,MAAMC,EAAYL,EAAQ,MAAQ,OAC5BM,EAAWR,GAAYC,GACtBQ,EAAOC,GAAYC,EAExB,CAAEC,UAAW,KAyBf,OAvBAC,EAAU,KACR,IACE,MAAMD,EAAYE,EAAMC,eAAeP,EAAS,CAC9CQ,cAAed,EACfC,WAAAA,EACAc,eAAgBb,KACbC,IAGLK,EAAS,CAAEE,UAAAA,IACX,MAAOM,GACP,KAAIA,aAAiBJ,EAAMK,YAAcD,aAAiBE,WAOxD,MAAMF,EALJR,EADEN,EACO,CAAEiB,aAAcjB,EAAYc,IAE5B,CAAEN,UAAWM,EAAMI,YAMjC,CAACpB,EAAOM,EAASL,EAAYC,EAAaC,IAEzC,iBAAkBI,EACbA,EAAMY,aAIbE,gBAAChB,mBACKD,GACJkB,wBAAyB,CAAEC,OAAQhB,EAAMG"}